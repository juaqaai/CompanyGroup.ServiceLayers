// -- Sammy.js -- /plugins/sammy.form.js
// http://sammyjs.org
// Version: 0.7.2
// Built: 2012-10-19 23:50:27 -0400
(function(e){function t(t,n){return typeof n=="undefined"?"":(e.isFunction(n)&&(n=n.apply(t)),n.toString())}function n(n,r,i){var s="<";return s+=n,typeof r!="undefined"&&e.each(r,function(e,n){n!==null&&(s+=" "+e+"='",s+=t(r,n).replace(/\'/g,"'"),s+="'")}),i===!1?s+=">":typeof i!="undefined"?(s+=">",s+=t(this,i),s+="</"+n+">"):s+=" />",s}Sammy=Sammy||{},Sammy.FormBuilder=function(e,t){this.name=e,this.object=t},e.extend(Sammy.FormBuilder.prototype,{open:function(t){return n("form",e.extend({method:"post",action:"#/"+this.name+"s"},t),!1)},close:function(){return"</form>"},label:function(t,r,i){var s={"for":this._attributesForKeyPath(t).name};return n("label",e.extend(s,i),r)},hidden:function(t,r){return r=e.extend({type:"hidden"},this._attributesForKeyPath(t),r),n("input",r)},text:function(t,r){return r=e.extend({type:"text"},this._attributesForKeyPath(t),r),n("input",r)},textarea:function(t,r){var i;return r=e.extend(this._attributesForKeyPath(t),r),i=r.value,delete r.value,n("textarea",r,i)},password:function(t,n){return this.text(t,e.extend({type:"password"},n))},select:function(r,i,s){var o="",u;return s=e.extend(this._attributesForKeyPath(r),s),u=s.value,delete s.value,e.each(i,function(r,i){var s,a,f;e.isArray(i)?(s=i[1],a=i[0]):(s=i,a=i),f={value:t(this.object,s)},s===u&&(f.selected="selected"),o+=n("option",f,a)}),n("select",s,o)},radio:function(r,i,s){var o;return s=e.extend(this._attributesForKeyPath(r),s),o=s.value,s.value=t(this.object,i),o==s.value&&(s.checked="checked"),n("input",e.extend({type:"radio"},s))},checkbox:function(t,n,r){var i="";return r||(r={}),r.hidden_element!==!1&&(i+=this.hidden(t,{value:!n})),delete r.hidden_element,i+=this.radio(t,n,e.extend({type:"checkbox"},r)),i},submit:function(t){return n("input",e.extend({type:"submit"},t))},_attributesForKeyPath:function(n){var r=this,i=e.isArray(n)?n:n.split(/\./),s=r.name,o=r.object,u=r.name;return e.each(i,function(e,t){typeof o=="undefined"||o===""?o="":typeof t=="number"||t.match(/^\d+$/)?o=o[parseInt(t,10)]:o=o[t],s+="["+t+"]",u+="-"+t}),{name:s,value:t(r.object,o),"class":u}}}),Sammy.Form=function(t){t.helpers({simple_element:n,formFor:function(t,n,r){var i;return e.isFunction(n)&&(r=n,n=this[t]),i=new Sammy.FormBuilder(t,n),r.apply(this,[i]),i}})}})(jQuery);
